import{x as V,am as D,G as Y,e as q,y as w,an as x,ao as rr,ap as er,aq as tr,ar,as as ir,at as sr,au as fr,g as O,av as ur,aw as or,D as $,ax as nr,ay as lr,az as cr,aA as vr,aB as gr,U as dr,aC as br,aD as hr,aE as pr,R as S,ad as z}from"./DMT2ISIW.js";function _r(r,t){var e=void 0,a;V(()=>{e!==(e=t())&&(a&&(D(a),a=null),e&&(a=Y(()=>{q(()=>e(r))})))})}function K(r){var t,e,a="";if(typeof r=="string"||typeof r=="number")a+=r;else if(typeof r=="object")if(Array.isArray(r)){var i=r.length;for(t=0;t<i;t++)r[t]&&(e=K(r[t]))&&(a&&(a+=" "),a+=e)}else for(e in r)r[e]&&(a&&(a+=" "),a+=e);return a}function Ar(){for(var r,t,e=0,a="",i=arguments.length;e<i;e++)(r=arguments[e])&&(t=K(r))&&(a&&(a+=" "),a+=t);return a}function Sr(r){return typeof r=="object"?Ar(r):r??""}const H=[...` 	
\r\fÂ \v\uFEFF`];function wr(r,t,e){var a=r==null?"":""+r;if(t&&(a=a?a+" "+t:t),e){for(var i in e)if(e[i])a=a?a+" "+i:i;else if(a.length)for(var s=i.length,u=0;(u=a.indexOf(i,u))>=0;){var o=u+s;(u===0||H.includes(a[u-1]))&&(o===a.length||H.includes(a[o]))?a=(u===0?"":a.substring(0,u))+a.substring(o+1):u=o}}return a===""?null:a}function R(r,t=!1){var e=t?" !important;":";",a="";for(var i in r){var s=r[i];s!=null&&s!==""&&(a+=" "+i+": "+s+e)}return a}function U(r){return r[0]!=="-"||r[1]!=="-"?r.toLowerCase():r}function Tr(r,t){if(t){var e="",a,i;if(Array.isArray(t)?(a=t[0],i=t[1]):a=t,r){r=String(r).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var s=!1,u=0,o=!1,v=[];a&&v.push(...Object.keys(a).map(U)),i&&v.push(...Object.keys(i).map(U));var n=0,_=-1;const d=r.length;for(var g=0;g<d;g++){var c=r[g];if(o?c==="/"&&r[g-1]==="*"&&(o=!1):s?s===c&&(s=!1):c==="/"&&r[g+1]==="*"?o=!0:c==='"'||c==="'"?s=c:c==="("?u++:c===")"&&u--,!o&&s===!1&&u===0){if(c===":"&&_===-1)_=g;else if(c===";"||g===d-1){if(_!==-1){var I=U(r.substring(n,_).trim());if(!v.includes(I)){c!==";"&&g++;var A=r.substring(n,g).trim();e+=" "+A+";"}}n=g+1,_=-1}}}}return a&&(e+=R(a)),i&&(e+=R(i,!0)),e=e.trim(),e===""?null:e}return r==null?null:String(r)}function Ir(r,t,e,a,i,s){var u=r.__className;if(w||u!==e||u===void 0){var o=wr(e,a,s);(!w||o!==r.getAttribute("class"))&&(o==null?r.removeAttribute("class"):t?r.className=o:r.setAttribute("class",o)),r.__className=e}else if(s&&i!==s)for(var v in s){var n=!!s[v];(i==null||n!==!!i[v])&&r.classList.toggle(v,n)}return s}function C(r,t={},e,a){for(var i in e){var s=e[i];t[i]!==s&&(e[i]==null?r.style.removeProperty(i):r.style.setProperty(i,s,a))}}function Lr(r,t,e,a){var i=r.__style;if(w||i!==t){var s=Tr(t,a);(!w||s!==r.getAttribute("style"))&&(s==null?r.removeAttribute("style"):r.style.cssText=s),r.__style=t}else a&&(Array.isArray(a)?(C(r,e?.[0],a[0]),C(r,e?.[1],a[1],"important")):C(r,e,a));return a}function M(r,t,e=!1){if(r.multiple){if(t==null)return;if(!x(t))return rr();for(var a of r.options)a.selected=t.includes(B(a));return}for(a of r.options){var i=B(a);if(er(i,t)){a.selected=!0;return}}(!e||t!==void 0)&&(r.selectedIndex=-1)}function Nr(r){var t=new MutationObserver(()=>{M(r,r.__value)});t.observe(r,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),tr(()=>{t.disconnect()})}function B(r){return"__value"in r?r.__value:r.value}const y=Symbol("class"),k=Symbol("style"),F=Symbol("is custom element"),J=Symbol("is html");function Dr(r){if(w){var t=!1,e=()=>{if(!t){if(t=!0,r.hasAttribute("value")){var a=r.value;E(r,"value",null),r.value=a}if(r.hasAttribute("checked")){var i=r.checked;E(r,"checked",null),r.checked=i}}};r.__on_r=e,br(e),hr()}}function Or(r,t){t?r.hasAttribute("selected")||r.setAttribute("selected",""):r.removeAttribute("selected")}function E(r,t,e,a){var i=Z(r);w&&(i[t]=r.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&r.nodeName==="LINK")||i[t]!==(i[t]=e)&&(t==="loading"&&(r[ar]=e),e==null?r.removeAttribute(t):typeof e!="string"&&Q(r).includes(t)?r[t]=e:r.setAttribute(t,e))}function yr(r,t,e,a,i=!1){var s=Z(r),u=s[F],o=!s[J];let v=w&&u;v&&$(!1);var n=t||{},_=r.tagName==="OPTION";for(var g in t)g in e||(e[g]=null);e.class?e.class=Sr(e.class):e[y]&&(e.class=null),e[k]&&(e.style??=null);var c=Q(r);for(const f in e){let l=e[f];if(_&&f==="value"&&l==null){r.value=r.__value="",n[f]=l;continue}if(f==="class"){var I=r.namespaceURI==="http://www.w3.org/1999/xhtml";Ir(r,I,l,a,t?.[y],e[y]),n[f]=l,n[y]=e[y];continue}if(f==="style"){Lr(r,l,t?.[k],e[k]),n[f]=l,n[k]=e[k];continue}var A=n[f];if(!(l===A&&!(l===void 0&&r.hasAttribute(f)))){n[f]=l;var d=f[0]+f[1];if(d!=="$$")if(d==="on"){const p={},L="$$"+f;let b=f.slice(2);var j=pr(b);if(nr(b)&&(b=b.slice(0,-7),p.capture=!0),!j&&A){if(l!=null)continue;r.removeEventListener(b,n[L],p),n[L]=null}if(l!=null)if(j)r[`__${b}`]=l,cr([b]);else{let X=function(m){n[f].call(this,m)};n[L]=lr(b,r,X,p)}else j&&(r[`__${b}`]=void 0)}else if(f==="style")E(r,f,l);else if(f==="autofocus")vr(r,!!l);else if(!u&&(f==="__value"||f==="value"&&l!=null))r.value=r.__value=l;else if(f==="selected"&&_)Or(r,l);else{var h=f;o||(h=gr(h));var P=h==="defaultValue"||h==="defaultChecked";if(l==null&&!u&&!P)if(s[f]=null,h==="value"||h==="checked"){let p=r;const L=t===void 0;if(h==="value"){let b=p.defaultValue;p.removeAttribute(h),p.defaultValue=b,p.value=p.__value=L?b:null}else{let b=p.defaultChecked;p.removeAttribute(h),p.defaultChecked=b,p.checked=L?b:!1}}else r.removeAttribute(f);else P||c.includes(h)&&(u||typeof l!="string")?(r[h]=l,h in s&&(s[h]=dr)):typeof l!="function"&&E(r,h,l)}}}return v&&$(!0),n}function Mr(r,t,e=[],a=[],i,s=!1){ir(e,a,u=>{var o=void 0,v={},n=r.nodeName==="SELECT",_=!1;if(V(()=>{var c=t(...u.map(O)),I=yr(r,o,c,i,s);_&&n&&"value"in c&&M(r,c.value);for(let d of Object.getOwnPropertySymbols(v))c[d]||D(v[d]);for(let d of Object.getOwnPropertySymbols(c)){var A=c[d];d.description===ur&&(!o||A!==o[d])&&(v[d]&&D(v[d]),v[d]=Y(()=>_r(r,()=>A))),I[d]=A}o=I}),n){var g=r;q(()=>{M(g,o.value,!0),Nr(g)})}_=!0})}function Z(r){return r.__attributes??={[F]:r.nodeName.includes("-"),[J]:r.namespaceURI===sr}}var G=new Map;function Q(r){var t=G.get(r.nodeName);if(t)return t;G.set(r.nodeName,t=[]);for(var e,a=r,i=Element.prototype;i!==a;){e=or(a);for(var s in e)e[s].set&&t.push(s);a=fr(a)}return t}var kr=(r=>(r[r.Unknown=0]="Unknown",r[r.LoggedIn=1]="LoggedIn",r[r.LoggedOut=2]="LoggedOut",r))(kr||{});let N=z(0),T=z(null);function Pr(){return O(N)}function $r(){return O(T)}async function Hr(r,t){const e=new FormData;e.append("username",t),r&&e.append("image",r);const a=await fetch("/api/v1/user",{method:"POST",body:e,headers:W()});if(a.status===200){const i=await a.json();O(T).username=t,i.image_url&&(O(T).image=i.image_url)}return a}async function Rr(){S(N,0);const r=await fetch("/api/v1/user",{headers:W()});if(r.status==200){const t=await r.json();S(T,t.account,!0),S(N,1);return}S(N,2)}function Br(){S(T,null),Ur(),S(N,2)}function W(){return{token:jr()}}function Er(r){localStorage.setItem("token",r)}function jr(){return localStorage.getItem("token")??""}function Ur(){return localStorage.removeItem("token")}async function Gr(r){const t=await fetch("/api/v1/google/login",{method:"POST",body:JSON.stringify({token:r})});if(t.status===200){const e=await t.json();return S(T,e.account,!0),Er(e.token),S(N,1),O(T)}return null}export{kr as A,Ir as a,Mr as b,Rr as c,Lr as d,$r as e,Pr as f,W as g,Br as h,Gr as l,Dr as r,E as s,Hr as u};
